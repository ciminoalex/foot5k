<!--
  Generated template for the MatchViewPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar>
    <ion-title>{{CurrentMatch?.ora | slice:0:5}} | {{CurrentMatch?.campo}}</ion-title>
    <ion-buttons end>
        <button ion-button (click)="editMatch()">
          <ion-icon name="create"></ion-icon>
        </button>
      </ion-buttons>
  </ion-navbar>
</ion-header>


<ion-content class="match-content">

  <ion-fab right bottom>
      <button ion-fab color="secondary"><ion-icon name="arrow-dropup"></ion-icon></button>
      <ion-fab-list side="top">
          <button ion-fab (click)="shareMatch()"><ion-icon name="share"></ion-icon> <ion-label>Condividi</ion-label></button>
          <button ion-fab><ion-icon name="person-add"></ion-icon> <ion-label>Aggiungi ospite</ion-label></button>
        </ion-fab-list>
  </ion-fab>

  <div class="match-details">
    <ion-row wrap class="match-data-row">
      <ion-col no-padding class="field-name" width-33>
        Campo:
      </ion-col>
      <ion-col no-padding class="field-value" width-66>
        {{CurrentMatch?.campo}}
      </ion-col>
    </ion-row>
    <ion-row wrap class="match-data-row">
      <ion-col no-padding class="field-name" width-33>
        Data:
      </ion-col>
      <ion-col no-padding class="field-value" width-66>
          {{CurrentMatch?.data | date:'dd'}}/{{CurrentMatch?.data | date:'MM'}}/{{CurrentMatch?.data | date:'yyyy'}}
      </ion-col>
    </ion-row>
    <ion-row wrap class="match-data-row">
      <ion-col no-padding class="field-name" width-33>
        Orario:
      </ion-col>
      <ion-col no-padding class="field-value" width-66>
          {{CurrentMatch?.ora | slice:0:5}} - {{CurrentMatch?.ora_a | slice:0:5}}
      </ion-col>
    </ion-row>
    <ion-row wrap class="match-data-row">
      <ion-col no-padding class="field-name" width-33>
        Organizzatore:
      </ion-col>
      <ion-col no-padding class="field-value" width-66>
        <img src="{{CurrentMatch?.owner?.Picture}}" style="height:15px;width:15px;border-radius:8px;margin-bottom: -2px;"> {{CurrentMatch?.owner?.NomeCompleto}}
        <ion-icon class="owner-icon" name="arrow-dropright" green></ion-icon>
      </ion-col>
    </ion-row>
    <ion-row wrap class="match-data-row">
        <ion-col no-padding class="field-name" width-33>
          Gruppo:
        </ion-col>
        <ion-col no-padding class="field-value" width-66>
          {{CurrentMatch?.groups_id}}
          <ion-icon class="owner-icon" name="arrow-dropright" green></ion-icon>
        </ion-col>
      </ion-row>
      <ion-row wrap class="match-data-row">
      <ion-col no-padding class="field-name" width-33>
        Conferme:
      </ion-col>
      <ion-col no-padding class="field-value" width-66>
          <ion-badge item-start>{{CurrentMatch?.conferme_num}}/{{CurrentMatch?.giocatori}}</ion-badge>
        <span class="players-bar" style="float:right;margin-top: 4px;">
          <span *ngFor="let user of CurrentMatch?.conferme" style="margin:auto;">
            <img src="{{user.Picture}}" style="height:12px;width:12px;border-radius:5px;">
          </span>
        </span>
      </ion-col>
    </ion-row>
  </div>

  <ion-item [class]="CurrentMatchStatusClass">
    <ion-row class="match-action-row">
      <ion-col padding width-100>
        <div class="match-action-message">{{CurrentMatchStatusText}}</div>
      </ion-col>
    </ion-row>
    <ion-row class="match-action-row">
      <ion-col padding width-100 *ngIf="CurrentMatchStatusValue != '2'">
        <button ion-button width-100 (click)="matchAction('2')" icon-start color="theme-color-1" style="width:100%">
          <ion-icon name="checkmark"></ion-icon>
          {{'ACCEPT_MATCH' | translate}}
        </button>
      </ion-col>
      <ion-col padding width-100 *ngIf="CurrentMatchStatusValue == '2'">
        <button ion-button width-100 (click)="matchAction('0')" icon-start color="danger" style="width:100%">
          <ion-icon name="close"></ion-icon>
          {{'REFUSE_MATCH' | translate}}
        </button>
      </ion-col>
    </ion-row>
  </ion-item>


  <ion-item-group>
    <ion-item-divider class="players-divider">{{ 'CONFIRMED' | translate }}</ion-item-divider>
    <ion-item class="players-item" *ngFor="let user of CurrentMatch?.conferme">
      <ion-avatar item-left>
        <preload-image class="user-image" [ratio]="{w:1, h:1}" [src]="user.Picture"></preload-image>
      </ion-avatar>
      <h2 class="item-title">{{user.NomeCompleto}}</h2>
      <ion-note class="item-time" item-right>{{user.Ruolo}}</ion-note>
    </ion-item>
  </ion-item-group>

</ion-content>